{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fuad\\\\Desktop\\\\new\\\\src\\\\Components\\\\Order.js\",\n    _s = $RefreshSig$();\n\nimport { event } from 'jquery';\nimport React, { useState, useEffect } from 'react';\nimport './Order.css';\nimport { setDoc, doc, onSnapshot, updateDoc } from \"firebase/firestore\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport { db } from '../Firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Order(props) {\n  _s();\n\n  const [operatorNum, setOperatorNum] = useState(\"\");\n  const [telNum, setTelNum] = useState(\"\");\n  const [errOperatorNum, setErrOperatorNum] = useState(\"none\");\n  const [errTelNum, setErrTelNum] = useState(\"none\");\n  const [history, setHistory] = useState({});\n  const [userEmail, setUserEmail] = useState(props.userEmail);\n  const [userId, setUserId] = useState(props.userId);\n\n  const telChange = e => {\n    let tel = e.target.value;\n    let newTel = tel.slice(0, 7);\n    setTelNum(newTel);\n  };\n\n  const opChange = e => {\n    let tel = e.target.value;\n    let newTel = tel.slice(0, 3);\n    setOperatorNum(newTel);\n  };\n\n  async function setOrder(object) {\n    await setDoc(doc(db, userEmail, \"history\"), object);\n  }\n\n  ;\n\n  async function setStore(changedObject) {\n    await setDoc(doc(db, userEmail, \"cart\"), changedObject);\n  }\n\n  ;\n\n  async function updateHistory(newArray) {\n    await updateDoc(doc(db, userEmail, \"history\"), {\n      array: newArray\n    });\n  }\n\n  ;\n  const auth = getAuth();\n  useEffect(() => {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        onSnapshot(doc(db, user.email, \"history\"), doc => {\n          let historyS = doc.data();\n          setHistory(historyS);\n        });\n      } else {\n        console.log(\"giris yoxdur\");\n      }\n    });\n  }, []);\n\n  const orderFinish = e => {\n    e.preventDefault();\n    let d = new Date();\n    let day = d.getDate();\n    let month = d.getMonth();\n    month = month + 1;\n    let year = d.getFullYear();\n    let newDate = `${day}.${month}.${year}`;\n\n    if (telNum !== \"\" && operatorNum !== \"\") {\n      props.success();\n\n      if (history === undefined) {\n        setOrder({\n          array: [{\n            date: newDate,\n            products: [...props.products],\n            phone: `(+994) (${operatorNum}) ${telNum} `\n          }]\n        });\n      } else {\n        updateHistory([...history.array, {\n          date: newDate,\n          products: [...props.products],\n          phone: `(+994) (${operatorNum}) ${telNum} `\n        }]);\n      }\n\n      setStore({\n        cartdata: []\n      });\n      props.hideOrderBody();\n    } else {\n      if (telNum === \"\") {\n        setErrTelNum(\"3px solid red\");\n      } else {\n        setErrTelNum(\"none\");\n      }\n\n      if (operatorNum === \"\") {\n        setErrOperatorNum(\"3px solid red\");\n      } else {\n        setErrOperatorNum(\"none\");\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"order animate__animated animate__fadeInDownBig \",\n    style: {\n      display: props.show\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Sifari\\u015F et\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tel-input\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: orderFinish,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"order-inputs\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"country-number\",\n              defaultValue: \"+994\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              id: \"operator-number\",\n              placeholder: \"050\",\n              value: operatorNum,\n              onChange: opChange,\n              style: {\n                border: errOperatorNum\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              id: \"tel\",\n              placeholder: \"9993366\",\n              value: telNum,\n              onChange: telChange,\n              style: {\n                border: errTelNum\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 1\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"order-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"submit\",\n              id: \"submit\",\n              value: \"Sifari\\u015F ver\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 1\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"button\",\n              id: \"cancel\",\n              value: \"L\\u0259\\u011Fv et\",\n              onClick: props.hideOrderBody\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 1\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 1\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 1\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Order, \"6SZfkrslFpJODbR54YMcsYQZM5M=\");\n\n_c = Order;\n\nvar _c;\n\n$RefreshReg$(_c, \"Order\");","map":{"version":3,"sources":["C:/Users/Fuad/Desktop/new/src/Components/Order.js"],"names":["event","React","useState","useEffect","setDoc","doc","onSnapshot","updateDoc","getAuth","onAuthStateChanged","db","Order","props","operatorNum","setOperatorNum","telNum","setTelNum","errOperatorNum","setErrOperatorNum","errTelNum","setErrTelNum","history","setHistory","userEmail","setUserEmail","userId","setUserId","telChange","e","tel","target","value","newTel","slice","opChange","setOrder","object","setStore","changedObject","updateHistory","newArray","array","auth","user","email","historyS","data","console","log","orderFinish","preventDefault","d","Date","day","getDate","month","getMonth","year","getFullYear","newDate","success","undefined","date","products","phone","cartdata","hideOrderBody","display","show","border"],"mappings":"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","sourcesContent":["import { event } from 'jquery'\r\nimport React, { useState,useEffect } from 'react'\r\nimport './Order.css'\r\nimport {setDoc,doc,onSnapshot,updateDoc} from \"firebase/firestore\"\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\"\r\n\r\nimport {db} from '../Firebase'\r\n\r\nexport default function Order(props) {\r\n\r\n    const [operatorNum,setOperatorNum]=useState(\"\")\r\n    const [telNum,setTelNum]=useState(\"\")\r\n    const [errOperatorNum,setErrOperatorNum]=useState(\"none\")\r\n    const [errTelNum,setErrTelNum]=useState(\"none\")\r\nconst [history,setHistory]=useState({})\r\nconst [userEmail,setUserEmail]=useState(props.userEmail)\r\nconst [userId,setUserId]=useState(props.userId)\r\n\r\n    \r\n\r\nconst telChange = (e)=>{\r\nlet tel =e.target.value\r\nlet newTel = tel.slice(0,7)\r\nsetTelNum(newTel)\r\n}\r\nconst opChange = (e)=>{\r\n    let tel =e.target.value\r\n    let newTel = tel.slice(0,3)\r\n    setOperatorNum(newTel)\r\n    }\r\n\r\n\r\n    async function setOrder(object) {\r\n        await setDoc(doc(db, userEmail, \"history\"), object);\r\n        \r\n      };\r\n\r\n      async function setStore(changedObject) {\r\n        await setDoc(doc(db, userEmail, \"cart\"), changedObject);\r\n        \r\n      };\r\n     \r\n\r\n      async function updateHistory(newArray) {\r\n        await updateDoc(doc(db, userEmail, \"history\"),{array:newArray});\r\n        \r\n      };\r\n   \r\nconst auth=getAuth()\r\nuseEffect(() => {\r\n    onAuthStateChanged(auth, (user) => {\r\n        if (user) {\r\n        \r\n  \r\n  \r\n            onSnapshot(doc(db, user.email, \"history\"), (doc) => {\r\n\r\n                let historyS=doc.data()\r\n                setHistory(historyS)\r\n                \r\n                \r\n                    })\r\n                \r\n  \r\n  \r\n        } else {\r\n          console.log(\"giris yoxdur\")\r\n  \r\n        }\r\n      })\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\n  \r\n\r\n\r\n    \r\n}, [])\r\n\r\n\r\nconst orderFinish = (e)=>{\r\n    e.preventDefault()\r\n   \r\n  \r\n    let d=new Date()\r\n    let day= d.getDate()\r\n    let month =d.getMonth()\r\n    month=month+1\r\n    let year = d.getFullYear()\r\n    let newDate =`${day}.${month}.${year}`\r\n    \r\n\r\n\r\n    if(telNum!==\"\"&&operatorNum!==\"\"){\r\n        props.success()\r\n    \r\n\r\n\r\n        if(history===undefined){\r\n          \r\n            setOrder({array:[{ date:newDate,\r\n                products:[...props.products],\r\n                phone:`(+994) (${operatorNum}) ${telNum} `}]\r\n               \r\n            })\r\n            \r\n          \r\n           \r\n        }else{\r\n           \r\n            updateHistory([...history.array,{ date:newDate,\r\n                products:[...props.products],\r\n                phone:`(+994) (${operatorNum}) ${telNum} `}])\r\n                \r\n        }\r\n           \r\n\r\n        setStore({cartdata:[]})\r\n        props.hideOrderBody()\r\n\r\n\r\n\r\n       \r\n    }else{\r\n  if(telNum===\"\"){\r\nsetErrTelNum(\"3px solid red\")\r\n  } else{\r\n    setErrTelNum(\"none\")\r\n\r\n  }\r\nif(operatorNum===\"\"){\r\n      setErrOperatorNum(\"3px solid red\")\r\n  }else{\r\n    setErrOperatorNum(\"none\")\r\n\r\n  }\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"order animate__animated animate__fadeInDownBig \" style={{display:props.show}}>\r\n        <div className=\"order-body\">\r\n\r\n<h2>Sifariş et</h2>\r\n<div className=\"tel-input\">\r\n<form onSubmit={orderFinish}>\r\n    <div className=\"order-inputs\">\r\n<input type=\"text\" id=\"country-number\"  defaultValue=\"+994\" />\r\n<input type=\"number\" id=\"operator-number\"  placeholder=\"050\" value={operatorNum}  onChange={opChange} style={{border:errOperatorNum}}/>\r\n<input type=\"number\" id=\"tel\" placeholder=\"9993366\"   value={telNum} onChange={telChange} style={{border:errTelNum}}/>\r\n</div>\r\n<div className=\"order-buttons\">\r\n<input type=\"submit\" id =\"submit\"value=\"Sifariş ver\" />\r\n<input type=\"button\" id =\"cancel\"value=\"Ləğv et\" onClick={props.hideOrderBody}/>\r\n</div>\r\n</form>\r\n\r\n</div>\r\n\r\n        </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}