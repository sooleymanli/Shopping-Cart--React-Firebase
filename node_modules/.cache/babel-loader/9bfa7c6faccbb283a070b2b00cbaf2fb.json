{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Fuad/Desktop/new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"C:/Users/Fuad/Desktop/new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"C:/Users/Fuad/Desktop/new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/Fuad/Desktop/new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/Fuad/Desktop/new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Fuad/Desktop/new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import React,{useState,useEffect}from'react';import{NavLink,Route,useHistory}from'react-router-dom';import Products from'./Components/Products';import Cart from'./Components/Cart';import Login from'./Components/Login';import Register from'./Components/Register';import LoginSuccess from'./Components/LoginSuccess';import LoginError from'./Components/LoginError';import RegisterError from'./Components/RegisterError';import RegisterSuccess from'./Components/RegisterSuccess';import'animate.css/animate.css';import axiosLink from'./Products/Products.json';import{ProductsContext}from'./Context';import{useLocation}from\"react-router-dom\";import{getAuth,signOut,onAuthStateChanged}from\"firebase/auth\";import{db}from\"./Firebase\";import{setDoc,doc,onSnapshot,updateDoc}from\"firebase/firestore\";import{type}from'jquery';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _jsx2;var location=useLocation();var pathname=location.pathname;var splitLocation=pathname.split(\"/\");var _useState=useState(0),_useState2=_slicedToArray(_useState,2),orderCount=_useState2[0],setOrderCount=_useState2[1];var _useState3=useState(\"flex\"),_useState4=_slicedToArray(_useState3,2),links=_useState4[0],setLinks=_useState4[1];var _useState5=useState(\"none\"),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var _useState7=useState(\"none\"),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(\"none\"),_useState10=_slicedToArray(_useState9,2),regError=_useState10[0],setRegError=_useState10[1];var _useState11=useState(\"none\"),_useState12=_slicedToArray(_useState11,2),regSuccess=_useState12[0],setRegSuccess=_useState12[1];var _useState13=useState({cartdata:[]}),_useState14=_slicedToArray(_useState13,2),cart=_useState14[0],setCart=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),userId=_useState16[0],setUserId=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),userEmail=_useState18[0],setUserEmail=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),regErrMess=_useState20[0],SetRegErrMess=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),logErrMess=_useState22[0],SetLogErrMess=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),userStatus=_useState24[0],setUserStatus=_useState24[1];var changeArray;var showSuccess=function showSuccess(e){setSuccess(e);};var showError=function showError(e){setError(e);};var showRegSuccess=function showRegSuccess(e){setRegSuccess(e);};var showRegError=function showRegError(e){setRegError(e);};var regErrMessage=function regErrMessage(text){SetRegErrMess(text);};var logErrMessage=function logErrMessage(text){SetLogErrMess(text);};var changeLinks=function changeLinks(e){setLinks(e);};var handleInCrement=function handleInCrement(index){changeArray=cart.cartdata;changeArray[index].pieces=changeArray[index].pieces+1;updateStore(changeArray);};var handleDeCrement=function handleDeCrement(index){changeArray=cart.cartdata;if(changeArray[index].pieces!==1){changeArray[index].pieces=changeArray[index].pieces-1;updateStore(changeArray);}};var deleteFromCart=function deleteFromCart(index){var arrayForDelete=cart.cartdata;arrayForDelete.splice(index,1);updateStore(arrayForDelete);};function setStore(_x){return _setStore.apply(this,arguments);}function _setStore(){_setStore=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(changedObject){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return setDoc(doc(db,userEmail,\"cart\"),changedObject);case 2:case\"end\":return _context.stop();}}},_callee);}));return _setStore.apply(this,arguments);};function updateStore(_x2){return _updateStore.apply(this,arguments);}function _updateStore(){_updateStore=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(array){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return updateDoc(doc(db,userEmail,\"cart\"),{cartdata:array});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _updateStore.apply(this,arguments);};var newCartData,elIndex,arrElement;var addToCart=function addToCart(indexx){if(orderCount===0){setStore({cartdata:[_objectSpread(_objectSpread({},axiosLink.products[indexx]),{},{\"pieces\":1})]});}else{newCartData=cart.cartdata;elIndex=newCartData.findIndex(function(e){return e.id===axiosLink.products[indexx].id;});if(elIndex>=0){newCartData[elIndex].pieces=newCartData[elIndex].pieces+1;updateStore(newCartData);}else{updateStore([].concat(_toConsumableArray(cart.cartdata),[_objectSpread(_objectSpread({},axiosLink.products[indexx]),{},{\"pieces\":1})]));}}};var history=useHistory();var auth=getAuth();var accountOut=function accountOut(e){signOut(auth).then(function(){history.push(\"/login\");setLinks(\"none\");}).catch(function(error){// cixis olunmadi\n});};var newData,cartNum;useEffect(function(){onAuthStateChanged(auth,function(user){if(user){setLinks(\"flex\");setUserStatus(true);setUserId(user.uid);setUserEmail(user.email);onSnapshot(doc(db,user.email,\"cart\"),function(doc){newData=doc.data();cartNum=0;if(newData!==undefined){newData.cartdata.map(function(e){cartNum=cartNum+e.pieces;});setOrderCount(cartNum);setCart(newData);}else{setLinks(\"none\");setOrderCount(0);setCart({cartdata:[]});}});}else{setUserStatus(false);}});},[]);return/*#__PURE__*/_jsx(ProductsContext.Provider,{value:axiosLink.products,children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"area\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"circles\",children:[/*#__PURE__*/_jsx(\"li\",{}),/*#__PURE__*/_jsx(\"li\",{}),/*#__PURE__*/_jsx(\"li\",{}),/*#__PURE__*/_jsx(\"li\",{}),/*#__PURE__*/_jsx(\"li\",{}),/*#__PURE__*/_jsx(\"li\",{}),/*#__PURE__*/_jsx(\"li\",{}),/*#__PURE__*/_jsx(\"li\",{}),/*#__PURE__*/_jsx(\"li\",{}),/*#__PURE__*/_jsx(\"li\",{})]})}),/*#__PURE__*/_jsx(LoginSuccess,{show:success}),/*#__PURE__*/_jsx(LoginError,{show:error,message:logErrMess}),/*#__PURE__*/_jsx(RegisterSuccess,{regShow:regSuccess}),/*#__PURE__*/_jsx(RegisterError,{regShow:regError,message:regErrMess}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:Login}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",children:/*#__PURE__*/_jsx(Login,{showFunc:showSuccess,changeLinks:changeLinks,showError:showError,logErrMessage:logErrMessage})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",children:/*#__PURE__*/_jsx(Register,{showRegSuccess:showRegSuccess,showRegError:showRegError,regErrMessage:regErrMessage})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/products\",children:/*#__PURE__*/_jsx(Products,{add:addToCart,orderCount:orderCount,accountOut:accountOut})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/cart\",children:/*#__PURE__*/_jsx(Cart,(_jsx2={newData:cart,delete:deleteFromCart,in:handleInCrement,de:handleDeCrement,orderCount:orderCount},_defineProperty(_jsx2,\"orderCount\",orderCount),_defineProperty(_jsx2,\"accountOut\",accountOut),_defineProperty(_jsx2,\"button\",Boolean(orderCount)),_defineProperty(_jsx2,\"userId\",userId),_defineProperty(_jsx2,\"userEmail\",userEmail),_jsx2))})]})});}export default App;","map":{"version":3,"sources":["C:/Users/Fuad/Desktop/new/src/App.js"],"names":["React","useState","useEffect","NavLink","Route","useHistory","Products","Cart","Login","Register","LoginSuccess","LoginError","RegisterError","RegisterSuccess","axiosLink","ProductsContext","useLocation","getAuth","signOut","onAuthStateChanged","db","setDoc","doc","onSnapshot","updateDoc","type","App","location","pathname","splitLocation","split","orderCount","setOrderCount","links","setLinks","success","setSuccess","error","setError","regError","setRegError","regSuccess","setRegSuccess","cartdata","cart","setCart","userId","setUserId","userEmail","setUserEmail","regErrMess","SetRegErrMess","logErrMess","SetLogErrMess","userStatus","setUserStatus","changeArray","showSuccess","e","showError","showRegSuccess","showRegError","regErrMessage","text","logErrMessage","changeLinks","handleInCrement","index","pieces","updateStore","handleDeCrement","deleteFromCart","arrayForDelete","splice","setStore","changedObject","array","newCartData","elIndex","arrElement","addToCart","indexx","products","findIndex","id","history","auth","accountOut","then","push","catch","newData","cartNum","user","uid","email","data","undefined","map","Boolean"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, { useState, useEffect } from 'react';\nimport { NavLink, Route, useHistory } from 'react-router-dom';\nimport Products from './Components/Products';\nimport Cart from './Components/Cart';\nimport Login from './Components/Login';\nimport Register from './Components/Register';\nimport LoginSuccess from './Components/LoginSuccess';\nimport LoginError from './Components/LoginError';\nimport RegisterError from './Components/RegisterError';\nimport RegisterSuccess from './Components/RegisterSuccess';\nimport 'animate.css/animate.css'\nimport axiosLink from './Products/Products.json'\nimport { ProductsContext } from './Context';\nimport { useLocation } from \"react-router-dom\";\nimport { getAuth, signOut, onAuthStateChanged } from \"firebase/auth\"\nimport { db } from \"./Firebase\"\nimport { setDoc, doc, onSnapshot,updateDoc } from \"firebase/firestore\";\nimport { type } from 'jquery';\n\n\n\n\nfunction App() {\n  const location = useLocation();\n  const { pathname } = location;\n  const splitLocation = pathname.split(\"/\");\n\n\n  \n  const [orderCount, setOrderCount] = useState(0)\n  const [links, setLinks] = useState(\"flex\")\n  const [success, setSuccess] = useState(\"none\")\n  const [error, setError] = useState(\"none\")\n  const [regError, setRegError] = useState(\"none\")\n  const [regSuccess, setRegSuccess] = useState(\"none\")\n  const [cart,setCart]=useState({cartdata:[]})\n  const [userId,setUserId]=useState(\"\")\n  const [userEmail,setUserEmail]=useState(\"\")\n  const [regErrMess,SetRegErrMess]=useState(\"\")\n  const [logErrMess,SetLogErrMess]=useState(\"\")\n  const [userStatus,setUserStatus]=useState(false)\n  let changeArray\n\n  const showSuccess = (e) => {\n    setSuccess(e)\n  }\n  const showError = (e) => {\n    setError(e)\n  }\n  const showRegSuccess = (e) => {\n    setRegSuccess(e)\n  }\n  const showRegError = (e) => {\n    setRegError(e)\n  }\n\n  const regErrMessage=(text)=>{\n    SetRegErrMess(text)\n  }\n  const logErrMessage=(text)=>{\n    SetLogErrMess(text)\n  }\n  const changeLinks = (e) => {\n    setLinks(e)\n  }\n\n  const handleInCrement = (index) => {\n  changeArray=cart.cartdata\n  changeArray[index].pieces=changeArray[index].pieces+1\n  updateStore(changeArray)\n  }\n\n  const handleDeCrement = (index) => {\n    changeArray=cart.cartdata\n    if(changeArray[index].pieces!==1){\n      changeArray[index].pieces=changeArray[index].pieces-1\n      updateStore(changeArray)\n\n    }\n\n  }\n  const deleteFromCart = (index) => {\n   let arrayForDelete = cart.cartdata\n   arrayForDelete.splice(index,1)\n   updateStore(arrayForDelete)\n\n  }\n\n\n  async function setStore(changedObject) {\n    await setDoc(doc(db, userEmail, \"cart\"), changedObject);\n    \n  };\n\n  async function updateStore(array) {\n    await updateDoc(doc(db, userEmail, \"cart\"),{cartdata:array});\n    \n  };\n\n\n  let newCartData, elIndex, arrElement\n\n  const addToCart = (indexx) => {\n    if (orderCount === 0) {\n\n      setStore({ cartdata: [{ ...axiosLink.products[indexx], \"pieces\": 1 }] })\n    } else {\n\n      newCartData = cart.cartdata\n      elIndex = newCartData.findIndex(e => e.id === axiosLink.products[indexx].id)\n      if (elIndex >= 0) {\n        \n        newCartData[elIndex].pieces=newCartData[elIndex].pieces+1\n        updateStore(newCartData)\n\n      } else {\n\n        updateStore([...cart.cartdata, { ...axiosLink.products[indexx], \"pieces\": 1 }])\n\n\n      }\n\n\n    }\n  }\n\n\n\n\n\n\n\n\n\n  const history = useHistory()\n  const auth = getAuth()\n  const accountOut = (e) => {\n    signOut(auth).then(() => {\n      history.push(\"/login\")\n      setLinks(\"none\")\n    }).catch((error) => {\n      // cixis olunmadi\n    });\n\n  }\n\n  let newData,cartNum\n\n  useEffect(() => {\n  \n\n    onAuthStateChanged(auth, (user) => {\n      if (user) {\n        setLinks(\"flex\")\n\n\n      \n        setUserStatus(true)\n        setUserId(user.uid)\n        setUserEmail(user.email)\n        \n\n        onSnapshot(doc(db, user.email, \"cart\"), (doc) => {\n          newData = doc.data()\n           cartNum = 0\n\n          if (newData !== undefined) {\n            newData.cartdata.map((e) => {\n              cartNum = cartNum + e.pieces\n            })\n            setOrderCount(cartNum)\n            setCart(newData)\n            \n          } else {\n            setLinks(\"none\")\n\n            setOrderCount(0)\n            setCart({cartdata:[]})\n          }\n          \n\n\n        });\n\n\n    \n\n\n      } else {\n        setUserStatus(false)\n\n      }\n    })\n\n\n \n\n\n  },[])\n\n \n  return (\n\n    <ProductsContext.Provider value={axiosLink.products} >\n      <div className=\"App\">\n        \n\n\n        <div className=\"area\" >\n          <ul className=\"circles\">\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n          </ul>\n        </div >\n\n\n\n\n\n        <LoginSuccess show={success} />\n        <LoginError show={error} message={logErrMess}  />\n\n        <RegisterSuccess regShow={regSuccess} />\n        <RegisterError regShow={regError} message={regErrMess} />\n\n        <Route exact path=\"/\" component={Login} />\n        \n     \n        <Route exact path=\"/login\">\n          <Login showFunc={showSuccess} changeLinks={changeLinks} showError={showError} logErrMessage={logErrMessage} />\n        </Route>\n        <Route exact path=\"/register\">\n          <Register showRegSuccess={showRegSuccess} showRegError={showRegError}  regErrMessage={regErrMessage} />\n        </Route>\n        <Route exact path=\"/products\">\n          <Products add={addToCart}  orderCount={orderCount} accountOut={accountOut}/>\n        </Route>\n        <Route exact path=\"/cart\">\n          <Cart newData={cart} delete={deleteFromCart} in={handleInCrement} de={handleDeCrement} orderCount={orderCount} orderCount={orderCount} accountOut={accountOut} button={Boolean(orderCount)} userId={userId}  userEmail={userEmail}/>\n        </Route>\n\n\n\n      </div>\n    </ProductsContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}