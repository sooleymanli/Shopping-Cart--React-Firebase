{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fuad\\\\Desktop\\\\new\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport React, { useState, useEffect } from 'react';\nimport { NavLink, Route, useHistory } from 'react-router-dom';\nimport Products from './Components/Products';\nimport Cart from './Components/Cart';\nimport Login from './Components/Login';\nimport Register from './Components/Register';\nimport LoginSuccess from './Components/LoginSuccess';\nimport LoginError from './Components/LoginError';\nimport RegisterError from './Components/RegisterError';\nimport RegisterSuccess from './Components/RegisterSuccess';\nimport 'animate.css/animate.css';\nimport axiosLink from './Products/Products.json';\nimport { ProductsContext } from './Context';\nimport { useLocation } from \"react-router-dom\";\nimport { getAuth, signOut, onAuthStateChanged } from \"firebase/auth\";\nimport { db } from \"./Firebase\";\nimport { setDoc, doc, onSnapshot, updateDoc } from \"firebase/firestore\";\nimport { type } from 'jquery';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const location = useLocation();\n  const {\n    pathname\n  } = location;\n  const splitLocation = pathname.split(\"/\");\n  const [orderCount, setOrderCount] = useState(0);\n  const [links, setLinks] = useState(\"flex\");\n  const [success, setSuccess] = useState(\"none\");\n  const [error, setError] = useState(\"none\");\n  const [regError, setRegError] = useState(\"none\");\n  const [regSuccess, setRegSuccess] = useState(\"none\");\n  const [cart, setCart] = useState({\n    cartdata: []\n  });\n  const [userId, setUserId] = useState(\"\");\n  const [userEmail, setUserEmail] = useState(\"\");\n  const [regErrMess, SetRegErrMess] = useState(\"\");\n  const [logErrMess, SetLogErrMess] = useState(\"\");\n  const [userStatus, setUserStatus] = useState(false);\n  let changeArray;\n\n  const showSuccess = e => {\n    setSuccess(e);\n  };\n\n  const showError = e => {\n    setError(e);\n  };\n\n  const showRegSuccess = e => {\n    setRegSuccess(e);\n  };\n\n  const showRegError = e => {\n    setRegError(e);\n  };\n\n  const regErrMessage = text => {\n    SetRegErrMess(text);\n  };\n\n  const logErrMessage = text => {\n    SetLogErrMess(text);\n  };\n\n  const changeLinks = e => {\n    setLinks(e);\n  };\n\n  const handleInCrement = index => {\n    changeArray = cart.cartdata;\n    changeArray[index].pieces = changeArray[index].pieces + 1;\n    updateStore(changeArray);\n  };\n\n  const handleDeCrement = index => {\n    changeArray = cart.cartdata;\n\n    if (changeArray[index].pieces !== 1) {\n      changeArray[index].pieces = changeArray[index].pieces - 1;\n      updateStore(changeArray);\n    }\n  };\n\n  const deleteFromCart = index => {\n    let arrayForDelete = cart.cartdata;\n    arrayForDelete.splice(index, 1);\n    updateStore(arrayForDelete);\n  };\n\n  async function setStore(changedObject) {\n    await setDoc(doc(db, userEmail, \"cart\"), changedObject);\n  }\n\n  ;\n\n  async function updateStore(array) {\n    await updateDoc(doc(db, userEmail, \"cart\"), {\n      cartdata: array\n    });\n  }\n\n  ;\n  let newCartData, elIndex, arrElement;\n\n  const addToCart = indexx => {\n    if (orderCount === 0) {\n      setStore({\n        cartdata: [{ ...axiosLink.products[indexx],\n          \"pieces\": 1\n        }]\n      });\n    } else {\n      newCartData = cart.cartdata;\n      elIndex = newCartData.findIndex(e => e.id === axiosLink.products[indexx].id);\n\n      if (elIndex >= 0) {\n        newCartData[elIndex].pieces = newCartData[elIndex].pieces + 1;\n        updateStore(newCartData);\n      } else {\n        updateStore([...cart.cartdata, { ...axiosLink.products[indexx],\n          \"pieces\": 1\n        }]);\n      }\n    }\n  };\n\n  const history = useHistory();\n  const auth = getAuth();\n\n  const accountOut = e => {\n    signOut(auth).then(() => {\n      history.push(\"/login\");\n      setLinks(\"none\");\n    }).catch(error => {// cixis olunmadi\n    });\n  };\n\n  let newData, cartNum;\n  useEffect(() => {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        setLinks(\"flex\");\n        setUserStatus(true);\n        setUserId(user.uid);\n        setUserEmail(user.email);\n        onSnapshot(doc(db, user.email, \"cart\"), doc => {\n          newData = doc.data();\n          cartNum = 0;\n\n          if (newData !== undefined) {\n            newData.cartdata.map(e => {\n              cartNum = cartNum + e.pieces;\n            });\n            setOrderCount(cartNum);\n            setCart(newData);\n          } else {\n            setLinks(\"none\");\n            setOrderCount(0);\n            setCart({\n              cartdata: []\n            });\n          }\n        });\n      } else {\n        setUserStatus(false);\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(ProductsContext.Provider, {\n    value: axiosLink.products,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"area\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"circles\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoginSuccess, {\n        show: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoginError, {\n        show: error,\n        message: logErrMess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RegisterSuccess, {\n        regShow: regSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RegisterError, {\n        regShow: regError,\n        message: regErrMess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        component: Login\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/login\",\n        children: /*#__PURE__*/_jsxDEV(Login, {\n          showFunc: showSuccess,\n          changeLinks: changeLinks,\n          showError: showError,\n          logErrMessage: logErrMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/register\",\n        children: /*#__PURE__*/_jsxDEV(Register, {\n          showRegSuccess: showRegSuccess,\n          showRegError: showRegError,\n          regErrMessage: regErrMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/products\",\n        children: /*#__PURE__*/_jsxDEV(Products, {\n          add: addToCart,\n          orderCount: orderCount,\n          accountOut: accountOut\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/cart\",\n        children: /*#__PURE__*/_jsxDEV(Cart, {\n          newData: cart,\n          delete: deleteFromCart,\n          in: handleInCrement,\n          de: handleDeCrement,\n          orderCount: orderCount,\n          orderCount: orderCount,\n          accountOut: accountOut,\n          button: Boolean(orderCount),\n          userId: userId,\n          userEmail: userEmail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"I747aFz9d2DykyzIJTqMIDSDAj0=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Fuad/Desktop/new/src/App.js"],"names":["React","useState","useEffect","NavLink","Route","useHistory","Products","Cart","Login","Register","LoginSuccess","LoginError","RegisterError","RegisterSuccess","axiosLink","ProductsContext","useLocation","getAuth","signOut","onAuthStateChanged","db","setDoc","doc","onSnapshot","updateDoc","type","App","location","pathname","splitLocation","split","orderCount","setOrderCount","links","setLinks","success","setSuccess","error","setError","regError","setRegError","regSuccess","setRegSuccess","cart","setCart","cartdata","userId","setUserId","userEmail","setUserEmail","regErrMess","SetRegErrMess","logErrMess","SetLogErrMess","userStatus","setUserStatus","changeArray","showSuccess","e","showError","showRegSuccess","showRegError","regErrMessage","text","logErrMessage","changeLinks","handleInCrement","index","pieces","updateStore","handleDeCrement","deleteFromCart","arrayForDelete","splice","setStore","changedObject","array","newCartData","elIndex","arrElement","addToCart","indexx","products","findIndex","id","history","auth","accountOut","then","push","catch","newData","cartNum","user","uid","email","data","undefined","map","Boolean"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, { useState, useEffect } from 'react';\nimport { NavLink, Route, useHistory } from 'react-router-dom';\nimport Products from './Components/Products';\nimport Cart from './Components/Cart';\nimport Login from './Components/Login';\nimport Register from './Components/Register';\nimport LoginSuccess from './Components/LoginSuccess';\nimport LoginError from './Components/LoginError';\nimport RegisterError from './Components/RegisterError';\nimport RegisterSuccess from './Components/RegisterSuccess';\nimport 'animate.css/animate.css'\nimport axiosLink from './Products/Products.json'\nimport { ProductsContext } from './Context';\nimport { useLocation } from \"react-router-dom\";\nimport { getAuth, signOut, onAuthStateChanged } from \"firebase/auth\"\nimport { db } from \"./Firebase\"\nimport { setDoc, doc, onSnapshot,updateDoc } from \"firebase/firestore\";\nimport { type } from 'jquery';\n\n\n\n\nfunction App() {\n  const location = useLocation();\n  const { pathname } = location;\n  const splitLocation = pathname.split(\"/\");\n\n\n  \n  const [orderCount, setOrderCount] = useState(0)\n  const [links, setLinks] = useState(\"flex\")\n  const [success, setSuccess] = useState(\"none\")\n  const [error, setError] = useState(\"none\")\n  const [regError, setRegError] = useState(\"none\")\n  const [regSuccess, setRegSuccess] = useState(\"none\")\n  const [cart,setCart]=useState({cartdata:[]})\n  const [userId,setUserId]=useState(\"\")\n  const [userEmail,setUserEmail]=useState(\"\")\n  const [regErrMess,SetRegErrMess]=useState(\"\")\n  const [logErrMess,SetLogErrMess]=useState(\"\")\n  const [userStatus,setUserStatus]=useState(false)\n  let changeArray\n\n  const showSuccess = (e) => {\n    setSuccess(e)\n  }\n  const showError = (e) => {\n    setError(e)\n  }\n  const showRegSuccess = (e) => {\n    setRegSuccess(e)\n  }\n  const showRegError = (e) => {\n    setRegError(e)\n  }\n\n  const regErrMessage=(text)=>{\n    SetRegErrMess(text)\n  }\n  const logErrMessage=(text)=>{\n    SetLogErrMess(text)\n  }\n  const changeLinks = (e) => {\n    setLinks(e)\n  }\n\n  const handleInCrement = (index) => {\n  changeArray=cart.cartdata\n  changeArray[index].pieces=changeArray[index].pieces+1\n  updateStore(changeArray)\n  }\n\n  const handleDeCrement = (index) => {\n    changeArray=cart.cartdata\n    if(changeArray[index].pieces!==1){\n      changeArray[index].pieces=changeArray[index].pieces-1\n      updateStore(changeArray)\n\n    }\n\n  }\n  const deleteFromCart = (index) => {\n   let arrayForDelete = cart.cartdata\n   arrayForDelete.splice(index,1)\n   updateStore(arrayForDelete)\n\n  }\n\n\n  async function setStore(changedObject) {\n    await setDoc(doc(db, userEmail, \"cart\"), changedObject);\n    \n  };\n\n  async function updateStore(array) {\n    await updateDoc(doc(db, userEmail, \"cart\"),{cartdata:array});\n    \n  };\n\n\n  let newCartData, elIndex, arrElement\n\n  const addToCart = (indexx) => {\n    if (orderCount === 0) {\n\n      setStore({ cartdata: [{ ...axiosLink.products[indexx], \"pieces\": 1 }] })\n    } else {\n\n      newCartData = cart.cartdata\n      elIndex = newCartData.findIndex(e => e.id === axiosLink.products[indexx].id)\n      if (elIndex >= 0) {\n        \n        newCartData[elIndex].pieces=newCartData[elIndex].pieces+1\n        updateStore(newCartData)\n\n      } else {\n\n        updateStore([...cart.cartdata, { ...axiosLink.products[indexx], \"pieces\": 1 }])\n\n\n      }\n\n\n    }\n  }\n\n\n\n\n\n\n\n\n\n  const history = useHistory()\n  const auth = getAuth()\n  const accountOut = (e) => {\n    signOut(auth).then(() => {\n      history.push(\"/login\")\n      setLinks(\"none\")\n    }).catch((error) => {\n      // cixis olunmadi\n    });\n\n  }\n\n  let newData,cartNum\n\n  useEffect(() => {\n  \n\n    onAuthStateChanged(auth, (user) => {\n      if (user) {\n        setLinks(\"flex\")\n\n\n      \n        setUserStatus(true)\n        setUserId(user.uid)\n        setUserEmail(user.email)\n        \n\n        onSnapshot(doc(db, user.email, \"cart\"), (doc) => {\n          newData = doc.data()\n           cartNum = 0\n\n          if (newData !== undefined) {\n            newData.cartdata.map((e) => {\n              cartNum = cartNum + e.pieces\n            })\n            setOrderCount(cartNum)\n            setCart(newData)\n            \n          } else {\n            setLinks(\"none\")\n\n            setOrderCount(0)\n            setCart({cartdata:[]})\n          }\n          \n\n\n        });\n\n\n    \n\n\n      } else {\n        setUserStatus(false)\n\n      }\n    })\n\n\n \n\n\n  },[])\n\n \n  return (\n\n    <ProductsContext.Provider value={axiosLink.products} >\n      <div className=\"App\">\n        \n\n\n        <div className=\"area\" >\n          <ul className=\"circles\">\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n            <li></li>\n          </ul>\n        </div >\n\n\n\n\n\n        <LoginSuccess show={success} />\n        <LoginError show={error} message={logErrMess}  />\n\n        <RegisterSuccess regShow={regSuccess} />\n        <RegisterError regShow={regError} message={regErrMess} />\n\n        <Route exact path=\"/\" component={Login} />\n        \n     \n        <Route exact path=\"/login\">\n          <Login showFunc={showSuccess} changeLinks={changeLinks} showError={showError} logErrMessage={logErrMessage} />\n        </Route>\n        <Route exact path=\"/register\">\n          <Register showRegSuccess={showRegSuccess} showRegError={showRegError}  regErrMessage={regErrMessage} />\n        </Route>\n        <Route exact path=\"/products\">\n          <Products add={addToCart}  orderCount={orderCount} accountOut={accountOut}/>\n        </Route>\n        <Route exact path=\"/cart\">\n          <Cart newData={cart} delete={deleteFromCart} in={handleInCrement} de={handleDeCrement} orderCount={orderCount} orderCount={orderCount} accountOut={accountOut} button={Boolean(orderCount)} userId={userId}  userEmail={userEmail}/>\n        </Route>\n\n\n\n      </div>\n    </ProductsContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}